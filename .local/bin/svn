#!/bin/sh

test -t 1 || exec /usr/bin/svn "$@"

case "$1" in
di|diff|log)
    e=$(printf '\33')
    /usr/bin/svn "$@" | sed "
    /^-\\{72\\}$/,/^=\\{67\\}$/ !{
	s/^-.*/$e[31m&$e[m/
	t
	s/^+.*/$e[32m&$e[m/
	t
	s/^@.*/$e[36m&$e[m/
	}
    " | less -FRSX ;;
ann|h|st) /usr/bin/svn "$@" | less -FSX ;;
*) exec /usr/bin/svn "$@"
esac
